<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurateur César Bazaar (Alpha)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <!-- Vue Gallery -->
        <div id="view-gallery" class="view">
            <header>
                <h1>Collections</h1>
            </header>
            <main class="gallery-main">
                <div id="gallery-grid" class="gallery-grid">
                    <!-- Les cartes seront générées dynamiquement -->
                </div>
            </main>
        </div>

        <!-- Vue Workspace -->
        <div id="view-workspace" class="view" style="display: none;">
            <header>
                <button id="btn-back" class="back-button">← Retour</button>
                <h1>Simulateur <span id="collection-title">...</span></h1>
                <div class="actions">
                    <button id="btn-save" class="secondary">Sauvegarder</button>
                    <button id="btn-cart" class="primary">Ajouter au panier (min 3)</button>
                </div>
            </header>

            <main>
                <div class="workspace workspace-preview-first" id="workspace">
                    <div id="molding-warning-banner" class="molding-warning-banner" aria-live="polite" style="display: none;"></div>
                    <div class="preview-controls">
                        <div class="active-colors-row" id="active-colors-row" aria-label="Couleurs des zones du motif"></div>
                        <div class="layout-selector" id="layout-selector" aria-label="Disposition du calepinage"></div>
                    </div>
                    <div class="preview-area" id="preview-area">
                        <div class="carousel" id="preview-carousel" role="region" aria-label="Aperçu du calepinage">
                            <button type="button" class="carousel-btn carousel-btn-prev" id="carousel-prev" aria-label="Vue précédente">&#8249;</button>
                            <div class="carousel-track-container">
                                <div class="carousel-track" id="carousel-track">
                                    <div class="carousel-slide carousel-slide-active" data-slide-index="0">
                                        <div id="grid-container" class="grid-5x5"></div>
                                    </div>
                                    <div class="carousel-slide" data-slide-index="1">
                                        <div class="carousel-slide-placeholder">Vue Mockup (à venir)</div>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="carousel-btn carousel-btn-next" id="carousel-next" aria-label="Vue suivante">&#8250;</button>
                        </div>
                    </div>
                </div>
            
                <!-- Sidebar desktop : nuancier à droite. Visible uniquement quand une zone est sélectionnée. Mobile : masqué, palette dans le bottom sheet -->
                <aside class="sidebar sidebar-palette-desktop" id="sidebar-palette-desktop" aria-hidden="false">
                    <h3>Nuancier</h3>
                    <p class="sidebar-no-zone-msg" id="sidebar-no-zone-msg">Cliquez sur une zone ou une pastille pour choisir une couleur.</p>
                    <div id="color-palette" class="palette-grid"></div>
                    <div class="sidebar-recap" id="sidebar-recap">
                        <h4>Récapitulatif</h4>
                        <div id="sidebar-recap-list"></div>
                    </div>
                </aside>
            </main>

            <!-- Overlay transparent : clic en dehors ferme le tiroir (sans griser l’écran) -->
            <div id="palette-drawer-overlay" class="palette-drawer-overlay" aria-hidden="true"></div>
            <!-- Tiroir minimaliste : uniquement les couleurs -->
            <div id="palette-drawer" class="palette-drawer" aria-hidden="true">
                <div class="palette-drawer-body">
                    <div id="color-palette-drawer" class="palette-grid"></div>
                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>